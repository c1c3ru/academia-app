<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criar Subcole√ß√µes - Academia App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .warning { background-color: #fff3cd; color: #856404; }
        .info { background-color: #d1ecf1; color: #0c5460; }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        .form-group {
            margin: 15px 0;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        #log {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            border-radius: 5px;
            height: 300px;
            overflow-y: auto;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üèóÔ∏è Criar Subcole√ß√µes com Dados de Exemplo</h1>
        
        <div class="status info">
            <strong>‚ÑπÔ∏è Informa√ß√£o:</strong> Este script criar√° subcole√ß√µes organizadas por academia com dados de exemplo.
        </div>

        <div class="form-group">
            <label for="academiaId">ID da Academia:</label>
            <input type="text" id="academiaId" placeholder="Ex: gym_123" required>
        </div>

        <div class="form-group">
            <label for="academiaName">Nome da Academia:</label>
            <input type="text" id="academiaName" placeholder="Ex: Academia For√ßa Total" required>
        </div>

        <div style="text-align: center; margin: 20px 0;">
            <button onclick="createSubcollections()">üöÄ Criar Subcole√ß√µes</button>
        </div>

        <h3>Log de Execu√ß√£o:</h3>
        <div id="log"></div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>

    <script>
        // Configura√ß√£o do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyA_hzFPt9hUITlMq9BrsJuxAdzycVR3AEI",
            authDomain: "academia-app-5cf79.firebaseapp.com",
            projectId: "academia-app-5cf79",
            storageBucket: "academia-app-5cf79.firebasestorage.app",
            messagingSenderId: "377489252583",
            appId: "1:377489252583:android:87f2c3948511325769c242"
        };

        // Fun√ß√£o para fazer login com email/senha
        async function signInUser() {
            const email = prompt('Digite seu email de admin:');
            const password = prompt('Digite sua senha:');
            
            if (!email || !password) {
                throw new Error('Email e senha s√£o obrigat√≥rios');
            }
            
            try {
                const userCredential = await firebase.auth().signInWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                // Aguardar o token ser atualizado com custom claims
                await user.getIdToken(true);
                
                log(`‚úÖ Logado como: ${user.email}`, 'success');
                return user;
            } catch (error) {
                throw new Error(`Erro no login: ${error.message}`);
            }
        }

        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        function log(message, type = 'info') {
            const logElement = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            const prefix = type === 'error' ? '‚ùå' : type === 'success' ? '‚úÖ' : type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è';
            logElement.textContent += `[${timestamp}] ${prefix} ${message}\n`;
            logElement.scrollTop = logElement.scrollHeight;
        }

        // 30 modalidades de artes marciais mais praticadas no mundo
        const sampleModalities = [
            { 
                name: "Karate", 
                description: "Arte marcial japonesa focada em golpes lineares e bloqueios",
                graduationLevels: ["Branca", "Amarela", "Laranja", "Verde", "Roxa", "Marrom", "Preta 1¬∫ Dan", "Preta 2¬∫ Dan", "Preta 3¬∫ Dan"],
                monthlyPrice: 150,
                isActive: true
            },
            { 
                name: "Taekwondo", 
                description: "Arte marcial coreana especializada em chutes altos e acrob√°ticos",
                graduationLevels: ["Branca", "Amarela", "Verde", "Azul", "Vermelha", "Preta 1¬∫ Dan", "Preta 2¬∫ Dan", "Preta 3¬∫ Dan"],
                monthlyPrice: 150,
                isActive: true
            },
            { 
                name: "Jiu-Jitsu Brasileiro", 
                description: "Arte marcial brasileira focada em t√©cnicas de solo e submiss√£o",
                graduationLevels: ["Branca", "Azul", "Roxa", "Marrom", "Preta", "Coral", "Vermelha"],
                monthlyPrice: 180,
                isActive: true
            },
            { 
                name: "Jud√¥", 
                description: "Arte marcial japonesa focada em t√©cnicas de proje√ß√£o e imobiliza√ß√£o",
                graduationLevels: ["Branca", "Amarela", "Laranja", "Verde", "Azul", "Marrom", "Preta"],
                monthlyPrice: 150,
                isActive: true
            },
            { 
                name: "Muay Thai", 
                description: "Arte marcial tailandesa conhecida como 'a arte das oito armas'",
                graduationLevels: ["Iniciante", "B√°sico", "Intermedi√°rio", "Avan√ßado", "Instrutor", "Professor"],
                monthlyPrice: 160,
                isActive: true
            },
            { 
                name: "Boxing", 
                description: "Esporte de combate usando apenas os punhos",
                graduationLevels: ["Iniciante", "Amador", "Semi-Profissional", "Profissional"],
                monthlyPrice: 140,
                isActive: true
            },
            { 
                name: "MMA", 
                description: "Artes marciais mistas combinando v√°rias disciplinas",
                graduationLevels: ["Iniciante", "B√°sico", "Intermedi√°rio", "Avan√ßado", "Semi-Pro", "Profissional"],
                monthlyPrice: 200,
                isActive: true
            },
            { 
                name: "Kung Fu", 
                description: "Arte marcial chinesa com diversos estilos e filosofias",
                graduationLevels: ["Branca", "Amarela", "Verde", "Azul", "Marrom", "Preta 1¬∫ Grau", "Preta 2¬∫ Grau"],
                monthlyPrice: 150,
                isActive: true
            },
            { 
                name: "Aikido", 
                description: "Arte marcial japonesa focada em neutralizar ataques usando a for√ßa do oponente",
                graduationLevels: ["6¬∫ Kyu", "5¬∫ Kyu", "4¬∫ Kyu", "3¬∫ Kyu", "2¬∫ Kyu", "1¬∫ Kyu", "1¬∫ Dan", "2¬∫ Dan"],
                monthlyPrice: 150,
                isActive: true
            },
            { 
                name: "Krav Maga", 
                description: "Sistema de combate israelense para autodefesa",
                graduationLevels: ["P1", "P2", "P3", "P4", "P5", "G1", "G2", "G3"],
                monthlyPrice: 170,
                isActive: true
            },
            { 
                name: "Capoeira", 
                description: "Arte marcial brasileira que combina luta, dan√ßa e m√∫sica",
                graduationLevels: ["Crua", "Batizado", "Graduado", "Formado", "Professor", "Contramestre", "Mestre"],
                monthlyPrice: 120,
                isActive: true
            },
            { 
                name: "Kickboxing", 
                description: "Esporte de combate que combina boxe com chutes",
                graduationLevels: ["Iniciante", "B√°sico", "Intermedi√°rio", "Avan√ßado"],
                monthlyPrice: 150,
                isActive: true
            },
            { 
                name: "Wing Chun", 
                description: "Estilo de Kung Fu focado em combate de curta dist√¢ncia",
                graduationLevels: ["Siu Nim Tao", "Chum Kiu", "Biu Jee", "Muk Jong", "Luk Dim Boon Kwun", "Bart Cham Dao"],
                monthlyPrice: 160,
                isActive: true
            },
            { 
                name: "Hapkido", 
                description: "Arte marcial coreana que combina t√©cnicas de defesa e ataque",
                graduationLevels: ["Branca", "Amarela", "Verde", "Azul", "Vermelha", "Preta 1¬∫ Dan", "Preta 2¬∫ Dan"],
                monthlyPrice: 150,
                isActive: true
            },
            { 
                name: "Kyokushin", 
                description: "Estilo de karate conhecido por seu condicionamento f√≠sico intenso",
                graduationLevels: ["Branca", "Laranja", "Azul", "Amarela", "Verde", "Marrom", "Preta"],
                monthlyPrice: 160,
                isActive: true
            },
            { 
                name: "Savate", 
                description: "Arte marcial francesa que utiliza chutes e socos",
                graduationLevels: ["Azul", "Verde", "Vermelha", "Branca", "Amarela", "Prata"],
                monthlyPrice: 150,
                isActive: true
            },
            { 
                name: "Escrima", 
                description: "Arte marcial filipina focada em armas e combate pr√≥ximo",
                graduationLevels: ["Branca", "Amarela", "Laranja", "Verde", "Azul", "Marrom", "Preta"],
                monthlyPrice: 160,
                isActive: true
            },
            { 
                name: "Sambo", 
                description: "Arte marcial russa que combina judo e luta livre",
                graduationLevels: ["Branca", "Azul", "Vermelha"],
                monthlyPrice: 150,
                isActive: true
            },
            { 
                name: "Luta Livre", 
                description: "Modalidade de luta que permite pegadas nas pernas",
                graduationLevels: ["Iniciante", "B√°sico", "Intermedi√°rio", "Avan√ßado", "Competidor"],
                monthlyPrice: 150,
                isActive: true
            },
            { 
                name: "Greco-Romana", 
                description: "Estilo de luta ol√≠mpica sem uso das pernas para ataques",
                graduationLevels: ["Iniciante", "B√°sico", "Intermedi√°rio", "Avan√ßado", "Competidor"],
                monthlyPrice: 150,
                isActive: true
            }
        ];

        // Dados de exemplo para planos
        const samplePlans = [
            {
                name: "Plano Mensal",
                value: 150.00,
                duration: 1,
                description: "Acesso completo por 1 m√™s"
            },
            {
                name: "Plano Trimestral",
                value: 400.00,
                duration: 3,
                description: "Acesso completo por 3 meses com desconto"
            },
            {
                name: "Plano Semestral",
                value: 750.00,
                duration: 6,
                description: "Acesso completo por 6 meses com maior desconto"
            },
            {
                name: "Plano Anual",
                value: 1400.00,
                duration: 12,
                description: "Acesso completo por 1 ano com m√°ximo desconto"
            }
        ];

        // Dados de exemplo para avisos
        const sampleAnnouncements = [
            {
                title: "Novo Sistema de Check-in",
                content: "Agora voc√™ pode fazer check-in nas aulas usando geolocaliza√ß√£o. Certifique-se de estar na academia!",
                targetAudience: "students",
                authorId: "system",
                priority: "high",
                isActive: true
            },
            {
                title: "Hor√°rios de Funcionamento",
                content: "Segunda a Sexta: 6h √†s 22h | S√°bado: 8h √†s 18h | Domingo: 8h √†s 14h",
                targetAudience: "all",
                authorId: "system",
                priority: "medium",
                isActive: true
            },
            {
                title: "Aviso aos Instrutores",
                content: "Reuni√£o mensal de instrutores na pr√≥xima sexta-feira √†s 19h.",
                targetAudience: "instructors",
                authorId: "system",
                priority: "high",
                isActive: true
            }
        ];

        // Dados de exemplo para instrutores
        const sampleInstructors = [
            {
                name: "Jo√£o Silva",
                email: "joao.silva@example.com",
                phone: "(85) 99999-1111",
                specialties: ["Karate", "Taekwondo"],
                isActive: true,
                hireDate: new Date(2023, 0, 15)
            },
            {
                name: "Maria Santos",
                email: "maria.santos@example.com", 
                phone: "(85) 99999-2222",
                specialties: ["Jiu-Jitsu Brasileiro", "MMA"],
                isActive: true,
                hireDate: new Date(2023, 2, 10)
            },
            {
                name: "Carlos Oliveira",
                email: "carlos.oliveira@example.com",
                phone: "(85) 99999-3333", 
                specialties: ["Muay Thai", "Boxing"],
                isActive: true,
                hireDate: new Date(2023, 5, 20)
            }
        ];

        // Dados de exemplo para alunos
        const sampleStudents = [
            {
                name: "Ana Costa",
                email: "ana.costa@example.com",
                phone: "(85) 98888-1111",
                birthDate: new Date(1995, 5, 15),
                emergencyContact: "Pedro Costa - (85) 98888-1112",
                modalities: ["Karate"],
                isActive: true,
                registrationDate: new Date(2024, 0, 10)
            },
            {
                name: "Bruno Lima",
                email: "bruno.lima@example.com",
                phone: "(85) 98888-2222",
                birthDate: new Date(1988, 8, 22),
                emergencyContact: "Carla Lima - (85) 98888-2223",
                modalities: ["Jiu-Jitsu Brasileiro", "MMA"],
                isActive: true,
                registrationDate: new Date(2024, 1, 5)
            },
            {
                name: "Carla Mendes",
                email: "carla.mendes@example.com",
                phone: "(85) 98888-3333",
                birthDate: new Date(1992, 11, 8),
                emergencyContact: "Roberto Mendes - (85) 98888-3334",
                modalities: ["Muay Thai"],
                isActive: true,
                registrationDate: new Date(2024, 2, 12)
            }
        ];

        // Dados de exemplo para turmas
        const sampleClasses = [
            {
                name: "Karate Iniciante",
                modality: "Karate",
                instructor: "Jo√£o Silva",
                schedule: "Segunda, Quarta, Sexta - 19:00-20:00",
                maxStudents: 20,
                currentStudents: 15,
                isActive: true
            },
            {
                name: "Jiu-Jitsu Intermedi√°rio",
                modality: "Jiu-Jitsu Brasileiro", 
                instructor: "Maria Santos",
                schedule: "Ter√ßa, Quinta - 20:00-21:30",
                maxStudents: 15,
                currentStudents: 12,
                isActive: true
            },
            {
                name: "Muay Thai Avan√ßado",
                modality: "Muay Thai",
                instructor: "Carlos Oliveira",
                schedule: "Segunda, Quarta, Sexta - 20:30-21:30",
                maxStudents: 18,
                currentStudents: 10,
                isActive: true
            }
        ];

        // Dados de exemplo para pagamentos
        const samplePayments = [
            {
                studentName: "Ana Costa",
                planName: "Plano Mensal",
                amount: 120.00,
                dueDate: new Date(2024, 8, 10),
                paidDate: new Date(2024, 8, 8),
                status: "paid",
                paymentMethod: "pix"
            },
            {
                studentName: "Bruno Lima",
                planName: "Plano Trimestral",
                amount: 320.00,
                dueDate: new Date(2024, 8, 15),
                paidDate: null,
                status: "pending",
                paymentMethod: null
            },
            {
                studentName: "Carla Mendes",
                planName: "Plano Mensal",
                amount: 120.00,
                dueDate: new Date(2024, 8, 20),
                paidDate: new Date(2024, 8, 18),
                status: "paid",
                paymentMethod: "card"
            }
        ];

        // Dados de exemplo para gradua√ß√µes
        const sampleGraduations = [
            {
                studentName: "Ana Costa",
                modality: "Karate",
                currentLevel: "Amarela",
                instructor: "Jo√£o Silva",
                graduationDate: new Date(2024, 5, 15),
                certificate: "CERT-KAR-001",
                notes: "Excelente desempenho t√©cnico"
            },
            {
                studentName: "Bruno Lima", 
                modality: "Jiu-Jitsu Brasileiro",
                currentLevel: "Azul",
                instructor: "Maria Santos",
                graduationDate: new Date(2024, 7, 10),
                certificate: "CERT-JJB-002",
                notes: "Boa evolu√ß√£o no ground game"
            }
        ];

        // Dados de exemplo para convites
        const sampleInvites = [
            {
                email: "instrutor1@example.com",
                tipo: "instrutor",
                status: "pending",
                inviteToken: generateInviteToken(),
                createdBy: "system",
                expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000) // 7 dias
            },
            {
                email: "instrutor2@example.com", 
                tipo: "instrutor",
                status: "pending",
                inviteToken: generateInviteToken(),
                createdBy: "system",
                expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000) // 7 dias
            },
            {
                email: "aluno1@example.com",
                tipo: "aluno", 
                status: "pending",
                inviteToken: generateInviteToken(),
                createdBy: "system",
                expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000) // 7 dias
            }
        ];

        // Fun√ß√£o para gerar token de convite
        function generateInviteToken() {
            const chars = 'abcdefghijklmnopqrstuvwxyz0123456789';
            let token = '';
            for (let i = 0; i < 19; i++) {
                token += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return token;
        }

        // Sistema de gradua√ß√µes por modalidade
        const graduationSystems = {
            "Karate": ["Branca", "Amarela", "Laranja", "Verde", "Roxa", "Marrom", "Preta 1¬∫ Dan", "Preta 2¬∫ Dan", "Preta 3¬∫ Dan"],
            "Taekwondo": ["Branca", "Amarela", "Verde", "Azul", "Vermelha", "Preta 1¬∫ Dan", "Preta 2¬∫ Dan", "Preta 3¬∫ Dan"],
            "Jiu-Jitsu Brasileiro": ["Branca", "Azul", "Roxa", "Marrom", "Preta", "Coral", "Vermelha"],
            "Judo": ["Branca", "Amarela", "Laranja", "Verde", "Azul", "Marrom", "Preta 1¬∫ Dan", "Preta 2¬∫ Dan"],
            "Muay Thai": ["Iniciante", "B√°sico", "Intermedi√°rio", "Avan√ßado", "Instrutor", "Professor"],
            "Boxing": ["Iniciante", "Amador", "Semi-Profissional", "Profissional"],
            "MMA": ["Iniciante", "B√°sico", "Intermedi√°rio", "Avan√ßado", "Semi-Pro", "Profissional"],
            "Kung Fu": ["Branca", "Amarela", "Verde", "Azul", "Marrom", "Preta 1¬∫ Grau", "Preta 2¬∫ Grau"],
            "Aikido": ["6¬∫ Kyu", "5¬∫ Kyu", "4¬∫ Kyu", "3¬∫ Kyu", "2¬∫ Kyu", "1¬∫ Kyu", "1¬∫ Dan", "2¬∫ Dan"],
            "Krav Maga": ["P1", "P2", "P3", "P4", "P5", "G1", "G2", "G3"],
            "Capoeira": ["Crua", "Batizado", "Graduado", "Formado", "Professor", "Contramestre", "Mestre"]
        };

        async function createSubcollections() {
            const academiaId = document.getElementById('academiaId').value.trim();
            const academiaName = document.getElementById('academiaName').value.trim();
            
            if (!academiaId || !academiaName) {
                log('Por favor, preencha o ID e nome da academia', 'error');
                return;
            }

            log('üîê Fazendo login...');
            
            try {
                // Fazer login primeiro
                const user = await signInUser();
                
                // Aguardar um pouco para garantir que os custom claims foram aplicados
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Verificar custom claims
                const token = await user.getIdTokenResult();
                log(`üîç Custom Claims: ${JSON.stringify(token.claims)}`, 'info');
                
                if (!token.claims.role || !token.claims.academiaId) {
                    log('‚ö†Ô∏è Usu√°rio n√£o possui custom claims necess√°rios (role e academiaId)', 'warning');
                    log('üí° Solu√ß√£o: Execute o script fix-claims-direct.js para adicionar custom claims', 'info');
                    return;
                }
                
                log('üöÄ Iniciando cria√ß√£o de subcole√ß√µes...');
            
            try {
                // 1. Criar modalidades
                log('üìã Criando modalidades...');
                for (const modality of sampleModalities) {
                    const modalityData = {
                        name: modality.name,
                        description: modality.description,
                        graduationLevels: modality.graduationLevels,
                        monthlyPrice: modality.monthlyPrice,
                        isActive: modality.isActive,
                        createdAt: new Date(),
                        updatedAt: new Date()
                    };
                    
                    await db.collection(`gyms/${academiaId}/modalities`).add(modalityData);
                    log(`‚úÖ Modalidade criada: ${modality.name}`, 'success');
                }

                // 2. N√£o criar gradua√ß√µes separadas - elas j√° est√£o no graduationLevels das modalidades
                log('‚ÑπÔ∏è Gradua√ß√µes inclu√≠das nas modalidades como graduationLevels', 'info');

                // 3. Criar planos
                log('üí∞ Criando planos...');
                for (const plan of samplePlans) {
                    const planData = {
                        ...plan,
                        academiaId: academiaId,
                        createdAt: new Date(),
                        updatedAt: new Date()
                    };
                    
                    await db.collection(`gyms/${academiaId}/plans`).add(planData);
                    log(`‚úÖ Plano criado: ${plan.name}`, 'success');
                }

                // 4. Criar avisos
                log('üì¢ Criando avisos...');
                for (const announcement of sampleAnnouncements) {
                    const announcementData = {
                        title: announcement.title,
                        content: announcement.content,
                        targetAudience: announcement.targetAudience,
                        authorId: announcement.authorId,
                        priority: announcement.priority,
                        isActive: announcement.isActive,
                        createdAt: new Date(),
                        updatedAt: new Date()
                    };
                    
                    await db.collection(`gyms/${academiaId}/announcements`).add(announcementData);
                    log(`‚úÖ Aviso criado: ${announcement.title}`, 'success');
                }

                // 5. Criar instrutores
                log('üë®‚Äçüè´ Criando instrutores...');
                for (const instructor of sampleInstructors) {
                    const instructorData = {
                        name: instructor.name,
                        email: instructor.email,
                        phone: instructor.phone,
                        specialties: instructor.specialties,
                        isActive: instructor.isActive,
                        hireDate: instructor.hireDate,
                        createdAt: new Date(),
                        updatedAt: new Date()
                    };
                    
                    await db.collection(`gyms/${academiaId}/instructors`).add(instructorData);
                    log(`‚úÖ Instrutor criado: ${instructor.name}`, 'success');
                }

                // 6. Criar alunos
                log('üë®‚Äçüéì Criando alunos...');
                for (const student of sampleStudents) {
                    const studentData = {
                        name: student.name,
                        email: student.email,
                        phone: student.phone,
                        birthDate: student.birthDate,
                        emergencyContact: student.emergencyContact,
                        modalities: student.modalities,
                        isActive: student.isActive,
                        registrationDate: student.registrationDate,
                        createdAt: new Date(),
                        updatedAt: new Date()
                    };
                    
                    await db.collection(`gyms/${academiaId}/students`).add(studentData);
                    log(`‚úÖ Aluno criado: ${student.name}`, 'success');
                }

                // 7. Criar turmas
                log('üìö Criando turmas...');
                for (const classData of sampleClasses) {
                    const classDoc = {
                        name: classData.name,
                        modality: classData.modality,
                        instructor: classData.instructor,
                        schedule: classData.schedule,
                        maxStudents: classData.maxStudents,
                        currentStudents: classData.currentStudents,
                        isActive: classData.isActive,
                        createdAt: new Date(),
                        updatedAt: new Date()
                    };
                    
                    await db.collection(`gyms/${academiaId}/classes`).add(classDoc);
                    log(`‚úÖ Turma criada: ${classData.name}`, 'success');
                }

                // 8. Criar pagamentos
                log('üí≥ Criando pagamentos...');
                for (const payment of samplePayments) {
                    const paymentData = {
                        studentName: payment.studentName,
                        planName: payment.planName,
                        amount: payment.amount,
                        dueDate: payment.dueDate,
                        paidDate: payment.paidDate,
                        status: payment.status,
                        paymentMethod: payment.paymentMethod,
                        createdAt: new Date(),
                        updatedAt: new Date()
                    };
                    
                    await db.collection(`gyms/${academiaId}/payments`).add(paymentData);
                    log(`‚úÖ Pagamento criado: ${payment.studentName} - ${payment.planName}`, 'success');
                }

                // 9. Criar gradua√ß√µes
                log('ü•ã Criando gradua√ß√µes...');
                for (const graduation of sampleGraduations) {
                    const graduationData = {
                        studentName: graduation.studentName,
                        modality: graduation.modality,
                        currentLevel: graduation.currentLevel,
                        instructor: graduation.instructor,
                        graduationDate: graduation.graduationDate,
                        certificate: graduation.certificate,
                        notes: graduation.notes,
                        createdAt: new Date(),
                        updatedAt: new Date()
                    };
                    
                    await db.collection(`gyms/${academiaId}/graduations`).add(graduationData);
                    log(`‚úÖ Gradua√ß√£o criada: ${graduation.studentName} - ${graduation.currentLevel}`, 'success');
                }

                // 10. Criar convites
                log('üìß Criando convites...');
                for (const invite of sampleInvites) {
                    const inviteData = {
                        academiaId: academiaId,
                        email: invite.email,
                        tipo: invite.tipo,
                        status: invite.status,
                        inviteToken: invite.inviteToken,
                        createdBy: invite.createdBy,
                        createdAt: new Date(),
                        expiresAt: invite.expiresAt
                    };
                    
                    await db.collection(`gyms/${academiaId}/invites`).add(inviteData);
                    log(`‚úÖ Convite criado: ${invite.email} (${invite.tipo})`, 'success');
                }

                // 6. Criar documento da academia (se n√£o existir)
                log('üè¢ Criando/atualizando documento da academia...');
                const gymData = {
                    id: academiaId,
                    name: academiaName,
                    createdAt: new Date(),
                    updatedAt: new Date(),
                    active: true
                };
                
                await db.collection('gyms').doc(academiaId).set(gymData, { merge: true });
                log(`‚úÖ Academia criada/atualizada: ${academiaName}`, 'success');

                log('üéâ Todas as subcole√ß√µes foram criadas com sucesso!', 'success');
                log(`üìä Resumo: ${sampleModalities.length} modalidades, ${Object.values(graduationSystems).flat().length} gradua√ß√µes, ${samplePlans.length} planos, ${sampleAnnouncements.length} avisos`, 'info');
                log('üì± Agora voc√™ pode testar a aplica√ß√£o e ver as modalidades, planos e avisos.', 'info');
                
            } catch (error) {
                log(`‚ùå Erro durante a cria√ß√£o: ${error.message}`, 'error');
                console.error('Erro detalhado:', error);
            }
            
            } catch (loginError) {
                log(`‚ùå Erro no login: ${loginError.message}`, 'error');
                console.error('Erro de login:', loginError);
            }
        }
    </script>
</body>
</html>
